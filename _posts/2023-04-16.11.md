---
layout: single
title:  "[리눅스]리눅스 기본 명령어2"
categories: "리눅스"
tag: [blog, jekyll, Linux, 리눅스, 우분투, ubuntu]
---
# 리눅스 기본 명령어2
{: .notice--info}

## 사용자와 그룹
<p>리눅스는 멀티유저 시스템, 멀티 테스킹 시스템으로 사용자를 구별하고 사용자에게 적절한 지원을 할당해주는 방법이 필요하다. 사용자 계정은 사용자가 시스템에 접근할 수 있는 유일한 방법으로 관리자(root)가 사용자의 접근을 통제한다.</p>

## 사용자 계정정보 파일
<h4>/etc/passwd : 사용자의 계정정보를 확인할 수 있다.</h4>
<p>비밀번호는 /etc/shadow에 암호화되어 저장된다. 출력되는 정보는 다음과 같다.
<br>- User name : Password : UID : GID : Etc : Home Dir : Base Shell(/bin/bash)</p>
<br>
<h4>/etc/shadow는 root 사용자만 내용을 볼 수 있으며, 출력되는 정보는 다음과 같다.</h4>
<p>로그인 ID : 암호 : 최종 변경일 : MIN : MAX : WARNING : INACTIVE : EXPIRE : Flag
<br> - MIN : 암호 변경 후 사용할 수 있는 최대기간
<br> - MAX : 암호를 사용할 수 있는 최대 기간
<br> - WARNING : 암호가 만료되기 전 경고를 시작하는 날수
<br> - INACTIVE : 암호가 만료되어도 지정한 날수는 로그인 가능
<br> - EXPIRE : 사용자 계정이 만료되는 날
<br> - Flag : 향후 사용목적으로 비워둔 항목(상태)</p>
<br>
<h4>/etc/login.defs는 사용자 계정 설정과 관련된 기본 값 정의 파일이다.</h4>
<p># vi /etc/login.defs를 명령하면 파일을 볼 수 있는데 여기서 UMASK는 파일 접근 권한 설정이다.</p>
<p>먼저 디렉토리 생성시 퍼미션(777), 파일 생성시 퍼미션(666)이며 2진법으로 rwx를 판별하면 디렉 : 111 111 111, 파일 110 110 110이다. 
<br>관리자의 경우 UMASK : 022, 일반 사용자의 경우 UMASK는 002이다. 접근권한을 확인하려면 퍼미션에서 UMASK를 빼주면 된다. 
<br>관리자 디렉 퍼미션: 111 111 111 – 000 010 010 = 111 101 101(755) = rwx r-x r-x 
<br>관리자 파일 퍼미션: 110 110 110 – 000 010 010 = 110 100 100(644) = rw- r-- r-- 
<br>사용자 디렉 퍼미션 : 111 111 111 – 000 000 010 = 111 111 101(775) = rwx rwx r-x 
<br>관리자 파일 퍼미션: 110 110 110 – 000 000 010 = 110 110 100(664) = rw- r-- r—</p>
<br>
<h4>/etc/group은 그룹정보 파일이다.</h4>
<p>확인할 수 있는 내용은 그룹이름 : x : GID : 그룹멤버
<br> - x : 암호화된 그룹 암호를 /etc/gshadow에 저장
<br> - 그룹멤버 : 그룹에 속한 멤버들의 사용자 계정 이름이며 쉼표로 사용자를 구별
<br> - /etc/gshadow 파일은 그룹이름 : 그룹암호 : 관리자 : 그룹멤버를 확인할 수 있다.</p>

## 사용자 계정 관리
<h4>사용자 계정 추가하기<h4>
<p>adduser : 실행 시 기본 계정 정보를 자동으로 생성(홈 디렉토리도 같이 생성)
<br>useradd : 계정만 생성하며 기타 계정 정보는 수동으로 생성 및 설정(홈 디렉토리와 shall설정은 안되어 있다.)
<br> - useradd 명령시 주의사항으로 -m(home dir 생성), -s(shell 설정)을 같이 해줘야 한다.</p>

<p>useradd의 -D 옵션
<br>GROUP, HOME, INACTIVE, EXPIRE, SHELL, SKEL, CREATE_MALE_SPOOL의 기본설정 값을 확인후 수정할 수 있다. -D 다음에 -b(home), -e(EXPIRE), -f(INACTIVE), -g(GID), -s(SHELL)을 지정하여 수정할 수 있다. 이들은 /etc/default/useradd파일에 저장된다.</p>
<p>중요! 여기서 SKEL은 홈 디렉토리에 복사할 기본 환경 파일의 위치다. 이에 대한 정보는 /etc/skel 디렉토리에 있는데 공통으로 배포할 파일을 해당 디렉토리에 파일을 만들어 놓으면 사용자 계정 생성 시에 자동으로 복사된다.</p>
<p>su – 계정명 : 사용자 변경 명령어로 작업 디렉토리가 해당 계정의 홈디렉토리로 이동한다.</p>

## 사용자 계정정보 수정
<h4>usermode [옵션] 로그인ID</h4>

<p>usermode는 사용자 계정정보를 수정하는 명령어다. 홈디렉토리, 기본셸등 계정과 관련된 모든 정보를 수정 가능하다.</p>
<p>페스워드 에이징
<br>페스워드 에이징은 useradd, usermod, passwd, chage 명령으로 설정가능하다. 여기서 chage는 페스워드 에이징을 관리하는 별도의 명령이다.</p>
<p>chage 명령
<br>MIN : chage -m
<br>MAX : chage -M
<br>WARINING : chage -W
<br>INACTIVE : chage -I(대문자 i)
<br>EXPIRE : chage -E(중요!)
<br> - ex. chage -l(소문자 엘) userid 하면 설정 내용을 확인할 수 있고 위 명령어로 수정할 수 있다.</p>
<br>
<h4>userdel [옵션] 로그인ID</h4>
<p>userdel은 사용자 계정을 삭제하는 명령어다. 
<br>옵션 : -r(홈 디렉토리를 삭제), -f(사용자가 로그인 중에도 강제로 삭제)
<br>만약 옵션을 주지 않고 계정을 삭제하면 #rm -rf /home/사용자ID 명령을 해서 삭제해야 한다. <br>결론적으로 애초에 삭제할 때 #userdel -r 사용자ID 명령으로 삭제하자.</p>
